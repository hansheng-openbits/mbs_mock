rmbs_platform/
├── api_main.py                 # FastAPI service (RBAC headers, simulation jobs, health checks)
├── api_models.py               # Pydantic request/response models (API schemas)
├── config.py                   # Centralized settings (env-driven)
├── requirements.txt            # Pinned dependencies
├── env.example                 # Example environment configuration
├── ui_app.py                   # Streamlit entrypoint (modular UI)
├── ui/                         # Modular Streamlit UI package
│   ├── app.py                  # Main UI router (persona tabs/pages)
│   ├── pages/                  # Persona pages
│   │   ├── arranger.py         # Deal structuring + upload + version browsing
│   │   ├── servicer.py         # Servicer tape upload + version browsing + (planned) reconciliation
│   │   ├── investor.py         # Simulation, scenarios, ML model selection, results dashboards
│   │   └── auditor.py          # Audit review + compliance overview (baseline)
│   ├── services/
│   │   └── api_client.py       # Centralized UI↔API client (simulate, deals, scenarios, models)
│   ├── components/
│   │   ├── status.py           # Loading/progress/error components
│   │   └── data_display.py     # KPI dashboards, tables, Plotly charts
│   └── utils/
│       ├── formatting.py       # Currency/percent/number formatting + table formatters
│       └── validation.py       # UI-side JSON/CSV validation helpers
├── engine/                     # Cashflow engine + supporting modules
│   ├── __init__.py             # `run_simulation` entrypoint + helpers (collateral/performance normalization)
│   ├── loader.py               # Deal parsing + validation into internal structures
│   ├── state.py                # Deal/bond/fund state across periods
│   ├── compute.py              # Expression evaluation (variables/accounts proxies, normalization)
│   ├── waterfall.py            # Waterfall execution
│   ├── collateral.py           # Rule-based collateral cashflow model (CPR/CDR/Severity)
│   ├── reporting.py            # Reporting utilities
│   ├── reports.py              # Standard RMBS report templates (factor/distribution/trustee, etc.)
│   ├── structures.py           # Advanced tranche/waterfall structures (PAC/TAC, pro-rata groups)
│   ├── servicer.py             # Servicer advances + recovery logic
│   ├── swaps.py                # Swap settlement logic (caps/floors, netting)
│   ├── credit_enhancement.py   # OC/IC triggers + loss allocation utilities
│   ├── currency.py             # Multi-currency + FX conversion utilities
│   ├── loan_export.py          # Loan-level export utilities (Reg AB / EDW / universal exporter)
│   ├── comparison.py           # Portfolio/deal comparison utilities
│   └── stress_testing.py       # Stress testing framework (CCAR, sensitivity, Monte Carlo)
├── ml/                         # ML models + feature engineering + ETL
│   ├── models.py               # Model wrappers (rate model + universal model loader)
│   ├── features.py             # Feature engineering
│   ├── portfolio.py            # Surveillance engine + data manager
│   ├── severity.py             # Severity model
│   └── ...                     # Training scripts + Freddie ETL
├── models/                     # Serialized ML artifacts + registry
│   ├── model_registry.json
│   └── *.pkl
├── deals/                      # Deal specifications (JSON)
├── collateral/                 # Collateral snapshots (JSON)
├── performance/                # Performance tapes (CSV)
├── scenarios/                  # Scenario definitions (JSON)
├── *_versions/                 # Versioned artifacts + metadata (deals/collateral/performance/scenarios)
├── docs/
│   ├── Demo_Guide.md
│   ├── Persona_Design_Document.md
│   └── RMBS_Platform_Assessment_2026.md
├── unit_tests/                 # Pytest suite (engine, API, ML, stress testing, exports)
└── datasets/                   # User-friendly deal bundles (specs, collateral, tapes by deal ID)