{
  "accounts": [
    {
      "id": "RESERVE",
      "initial_balance": 2500000.0,
      "target_rule": "2500000.0",
      "type": "RESERVE"
    },
    {
      "id": "EXPENSE",
      "initial_balance": 0,
      "target_rule": "0",
      "type": "EXPENSE"
    }
  ],
  "bonds": [
    {
      "coupon": {
        "fixed_rate": 0.045,
        "kind": "FIXED"
      },
      "credit_enhancement": "15.0%",
      "cusip": "00ABC12A1",
      "id": "ClassA",
      "original_balance": 425000000.0,
      "priority": {
        "interest": 1,
        "principal": 1
      },
      "rating": "AAA",
      "type": "NOTE"
    },
    {
      "coupon": {
        "fixed_rate": 0.055,
        "kind": "FIXED"
      },
      "credit_enhancement": "7.5%",
      "cusip": "00ABC12M1",
      "id": "ClassM1",
      "original_balance": 37500000.0,
      "priority": {
        "interest": 2,
        "principal": 2
      },
      "rating": "AA",
      "type": "NOTE"
    },
    {
      "coupon": {
        "fixed_rate": 0.065,
        "kind": "FIXED"
      },
      "credit_enhancement": "2.5%",
      "cusip": "00ABC12M2",
      "id": "ClassM2",
      "original_balance": 25000000.0,
      "priority": {
        "interest": 3,
        "principal": 3
      },
      "rating": "A",
      "type": "NOTE"
    },
    {
      "coupon": {
        "fixed_rate": 0.085,
        "kind": "FIXED"
      },
      "credit_enhancement": "0.0%",
      "cusip": "00ABC12B1",
      "id": "ClassB",
      "original_balance": 12500000.0,
      "priority": {
        "interest": 4,
        "principal": 4
      },
      "rating": "BBB",
      "type": "NOTE"
    }
  ],
  "dates": {
    "closing_date": "2024-01-25",
    "cutoff_date": "2024-01-01",
    "day_count": "30_360",
    "first_payment_date": "2024-02-25",
    "maturity_date": "2054-02-25",
    "payment_frequency": "MONTHLY",
    "record_date_offset": -1,
    "settlement_delay": 1
  },
  "funds": [
    {
      "description": "Interest Available Funds",
      "id": "IAF",
      "initial_balance": 0
    },
    {
      "description": "Principal Available Funds",
      "id": "PAF",
      "initial_balance": 0
    },
    {
      "description": "Recovery Available Funds",
      "id": "RAF",
      "initial_balance": 0
    }
  ],
  "meta": {
    "asset_type": "PRIME_RMBS",
    "deal_id": "PRIME_2024_1",
    "deal_name": "Prime Residential Trust 2024-1",
    "description": "Senior/subordinate structure backed by prime first-lien residential mortgages",
    "issuer": "ABC Mortgage Capital",
    "version": "1.0"
  },
  "options": {
    "cleanup_call": {
      "enabled": true,
      "notice_period_days": 30,
      "threshold_rule": "collateral.current_balance <= 0.10 * 500000000",
      "trigger_party": "Depositor"
    },
    "optional_redemption": {
      "enabled": false
    }
  },
  "tests": [
    {
      "calc": {
        "denominator_rule": "bonds.ClassA.balance + bonds.ClassM1.balance",
        "numerator_rule": "collateral.current_balance",
        "value_rule": "collateral.current_balance / (bonds.ClassA.balance + bonds.ClassM1.balance)"
      },
      "cure_periods": 3,
      "effects": [
        {
          "set_flag": "OC_Trigger_Active"
        }
      ],
      "id": "OC_Test",
      "kind": "OC",
      "pass_if": "VALUE_GE_THRESHOLD",
      "threshold": {
        "rule": "1.15"
      }
    },
    {
      "calc": {
        "denominator_rule": "collateral.current_balance",
        "numerator_rule": "variables.Delinq60PlusBalance",
        "value_rule": "variables.Delinq60Plus"
      },
      "cure_periods": 3,
      "effects": [
        {
          "set_flag": "Delinq_Trigger_Active"
        }
      ],
      "id": "Delinq_Test",
      "kind": "DELINQ",
      "pass_if": "VALUE_LT_THRESHOLD",
      "threshold": {
        "rule": "0.025"
      }
    }
  ],
  "variables": {
    "ClassA_IntDue": "bonds.ClassA.balance * 0.0450 / 12",
    "ClassB_IntDue": "bonds.ClassB.balance * 0.0850 / 12",
    "ClassM1_IntDue": "bonds.ClassM1.balance * 0.0550 / 12",
    "ClassM2_IntDue": "bonds.ClassM2.balance * 0.0650 / 12",
    "DelinqTriggerFailed": "tests.Delinq_Test.failed",
    "DelinquencyRate": "variables.Delinq60Plus",
    "OCTriggerFailed": "tests.OC_Test.failed",
    "OC_Ratio": "collateral.current_balance / TotalBondBalance",
    "ReserveShortfall": "MAX(0, ReserveTarget - accounts.RESERVE)",
    "ReserveTarget": "2500000.0",
    "SeniorExpenses": "ServicingFee + TrusteeFee",
    "ServicingFee": "collateral.current_balance * ServicingFeeRate",
    "ServicingFeeRate": "0.0025 / 12",
    "TotalBondBalance": "bonds.ClassA.balance + bonds.ClassM1.balance + bonds.ClassM2.balance + bonds.ClassB.balance",
    "TrusteeFee": "collateral.current_balance * TrusteeFeeRate",
    "TrusteeFeeRate": "0.0002 / 12"
  },
  "waterfalls": {
    "interest": {
      "steps": [
        {
          "action": "PAY_FEE",
          "amount_rule": "ServicingFee",
          "from_fund": "IAF",
          "id": "1",
          "payee": "ABC Servicing LLC"
        },
        {
          "action": "PAY_FEE",
          "amount_rule": "TrusteeFee",
          "from_fund": "IAF",
          "id": "2",
          "payee": "Wells Fargo Trust"
        },
        {
          "action": "PAY_BOND_INTEREST",
          "amount_rule": "ClassA_IntDue",
          "from_fund": "IAF",
          "group": "ClassA",
          "id": "3"
        },
        {
          "action": "TRANSFER_FUND",
          "amount_rule": "MIN(funds.IAF, ReserveShortfall)",
          "from_fund": "IAF",
          "id": "4",
          "to": "RESERVE"
        },
        {
          "action": "PAY_BOND_INTEREST",
          "amount_rule": "ClassM1_IntDue",
          "from_fund": "IAF",
          "group": "ClassM1",
          "id": "5"
        },
        {
          "action": "PAY_BOND_INTEREST",
          "amount_rule": "ClassM2_IntDue",
          "condition": "DelinqTriggerFailed == False",
          "from_fund": "IAF",
          "group": "ClassM2",
          "id": "6"
        },
        {
          "action": "PAY_BOND_INTEREST",
          "amount_rule": "ClassB_IntDue",
          "condition": "DelinqTriggerFailed == False AND OCTriggerFailed == False",
          "from_fund": "IAF",
          "group": "ClassB",
          "id": "7"
        }
      ]
    },
    "loss_allocation": {
      "loss_source_rule": "variables.RealizedLoss",
      "write_down_order": [
        "ClassB",
        "ClassM2",
        "ClassM1",
        "ClassA"
      ]
    },
    "principal": {
      "steps": [
        {
          "action": "PAY_BOND_PRINCIPAL",
          "amount_rule": "ALL",
          "from_fund": "PAF",
          "group": "ClassA",
          "id": "1"
        },
        {
          "action": "PAY_BOND_PRINCIPAL",
          "amount_rule": "ALL",
          "from_fund": "PAF",
          "group": "ClassM1",
          "id": "2"
        },
        {
          "action": "PAY_BOND_PRINCIPAL",
          "amount_rule": "ALL",
          "from_fund": "PAF",
          "group": "ClassM2",
          "id": "3"
        },
        {
          "action": "PAY_BOND_PRINCIPAL",
          "amount_rule": "ALL",
          "from_fund": "PAF",
          "group": "ClassB",
          "id": "4"
        }
      ]
    }
  }
}